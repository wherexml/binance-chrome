# 🛠️ 安装指南与故障排除

## 快速安装步骤

### 1. 下载文件
确保你有以下文件：
```
binance-chrome/
├── manifest.json      ✓ 插件配置
├── content.js         ✓ 核心分析脚本  
├── popup.html         ✓ 弹窗界面
├── popup.js           ✓ 弹窗脚本
├── background.js      ✓ 后台服务
├── styles.css         ✓ 样式文件
└── README.md          ✓ 使用说明
```

### 2. 安装到Chrome
1. 打开Chrome，地址栏输入：`chrome://extensions/`
2. 开启右上角的 **"开发者模式"** 开关
3. 点击 **"加载已解压的扩展程序"**
4. 选择 `binance-chrome` 文件夹
5. 确认插件出现在扩展列表中

### 3. 验证安装
1. 访问 [Binance Alpha历史订单](https://www.binance.com/zh-CN/my/orders/alpha/orderhistory)
2. 应该能看到黄色的 **"开始分析当日交易"** 按钮
3. 点击浏览器右上角的插件图标，应该显示插件界面

## 🔧 故障排除

### 问题1: Service Worker注册失败 (Status Code: 15)
**症状**: 控制台显示 "Service worker registration failed"

**解决方案**:
1. 检查 `manifest.json` 是否包含：
   ```json
   "background": {
     "service_worker": "background.js",
     "type": "module"
   }
   ```
2. 重新加载插件：在 `chrome://extensions/` 中点击刷新按钮
3. 如果仍有问题，删除插件后重新安装

### 问题2: 插件按钮不显示
**可能原因**:
- 不在正确的页面
- Content script未正确加载
- 页面未完全加载

**解决方案**:
1. 确保在 `https://www.binance.com/zh-CN/my/orders/alpha/orderhistory` 页面
2. 刷新页面 (F5)
3. 检查控制台是否有JavaScript错误
4. 重新加载插件

### 问题3: 只分析第一页数据
**原因**: 自动翻页功能可能找不到"下一页"按钮

**解决方案**:
1. 打开开发者工具 (F12)
2. 查看Console日志，确认翻页状态
3. 确保页面完全加载后再开始分析
4. 如果Binance更新了页面结构，可能需要更新选择器

### 问题4: 数据统计不准确
**检查事项**:
1. 确认日期筛选器设置正确
2. 检查时区设置
3. 查看控制台日志中的提取数据记录
4. 确保只统计"已成交"订单

### 问题5: CSV导出失败
**解决方案**:
1. 检查浏览器的下载设置
2. 确保有足够的磁盘空间
3. 尝试在无痕模式下使用

## 📊 调试信息

### 开启调试模式
1. 按F12打开开发者工具
2. 切换到Console标签
3. 开始分析时查看日志输出

### 关键日志信息
```
开始分析当日交易数据，目标日期: 2025-08-14
检测到总页数: 218
正在分析第 1 页
找到当日交易: KOGE 买入 24.9113 KOGE 1,195.852 USDT
点击下一页按钮
检测到表格内容变化
...
分析完成! 共找到 5 个代币的 142 笔交易
```

### 常见错误信息
- `找不到下一页按钮或按钮已禁用` - 翻页功能问题
- `已超出当日数据范围，停止分析` - 正常，表示完成
- `Cannot read properties of undefined` - 页面结构变化

## ⚡ 性能优化建议

### 提高分析速度
1. **设置日期筛选**: 在分析前将页面筛选器设置为当天
2. **清除缓存**: 定期清除浏览器缓存
3. **关闭其他标签页**: 减少内存占用
4. **网络稳定**: 确保网络连接良好

### 减少错误率
1. **等待加载**: 页面完全加载后再开始分析
2. **避免干扰**: 分析期间不要切换标签页或最小化窗口
3. **检查登录**: 确保Binance账户未过期

## 🔄 手动验证结果

分析完成后，建议手动抽查几笔交易验证准确性：

1. 在分析结果中选择一个代币
2. 在Binance页面手动筛选该代币
3. 对比买入/卖出次数和金额
4. 验证磨损成本计算是否正确

## 📞 获取帮助

如果遇到其他问题：

1. **检查日志**: 开发者工具 → Console
2. **重启浏览器**: 完全关闭Chrome后重新打开
3. **更新Chrome**: 确保使用最新版本
4. **重新安装**: 删除插件后重新安装

## ⚠️ 重要提醒

- 本插件仅用于数据分析，不会修改任何交易
- 分析大量数据时请耐心等待
- 建议定期备份分析结果
- 遇到Binance页面更新时可能需要更新插件